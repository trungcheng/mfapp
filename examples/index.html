<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">

	<title>TEST MEDIA WIDGETS</title>

	<link rel="icon" href="/favicon.ico" />
	<link rel="stylesheet" href="css/style.css">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script src="http://127.0.0.1:7777/dist/media-widget.js"></script>
</head>

<body>
	<div class="test-block" id="function">
		<h3 class="test-title">Widgets</h3>

		<button id="image-collage" class="test-button">Image Collage</button>
	</div>

	<script>
		var urlToken = 'https://dummyjson.com/auth/login';
		var username = 'kminchelle';
		var password = '0lelplR';
		var channelId = '';

		var getTokenFunction = function(callback) {
			$.ajax({
                type: 'POST',
				url: urlToken,
                data: {
					username,
					password,
                },
                dataType: "json",
                success: function (res, err) {
                    if (typeof (res) === 'string') res = JSON.parse(res);
                    var data = res;

					if (typeof (data) === 'string') data = JSON.parse(data);

                    callback(null, data.token);
				},
				error: function (res) {
					callback(new Error(res.responseJSON.error.message));
				}
            });
		}

		// Image collage
		$('#image-collage').off('click').on('click', function() {
			MediaWidget.init({
				locale: 'vi',
				plugins: {
					name: 'media',
					options: {
						getTokenFunction: getTokenFunction
					},
					methods: {
						name: 'imageCollage',
						options: {
							background: '#fff',
							layout: 1,
							images: [
								'https://10267303661395597.lotuscdn.vn/121209157016621056/2019/11/29/tong-hop-nhung-hinh-anh-dep-ve-bien-36-15749954136271802005480.jpg',
								'https://mps-dev.lotuscdn.vn/122301472657379328/2020/2/12/19185en1-1581502672553154550081.jpg'
							],
							texts: [],
							cancel: function() {
								console.log('cancel');
							},
							callback: function(image) {
								console.log('callback =>', image);
							}
						}
					}
				}
			});
		});
	</script>
</body>
</html>
